Messaging API reference
Show all
#Common specifications
Common specifications for Messaging API, such as the domain name of endpoints, response when a request succeeds or fails, and rate limit.

Domain name
Rate limits
Status codes
Response headers
Error responses
Other common specifications
Show 
#Webhooks
When an event occurs, such as when a user adds your LINE Official Account as a friend or sends a message, the LINE Platform sends an HTTPS POST request to the webhook URL (bot server).

The webhook URL is configured for each channel in the LINE Developers Console.

 We recommend that you make the event processing asynchronous
We recommend that you make the event processing asynchronous so that the processing of HTTP POST requests does not delay the processing of subsequent events.

 The IP address of the LINE Platform isn't disclosed
The IP address of the LINE Platform from which the webhook request is sent isn't disclosed. For better security, use signature validation instead of access control by IP address.

#Request headers
x-line-signature
Used for signature validation

 Request header field names are case insensitive
Uppercase and lowercase letters in the Request headers field names may change without notice. The bot server that receives the webhook should handle the header field name without case distinction. *1

Before change	After change
Header field name example	X-Line-Signature	x-line-signature
*1 https://datatracker.ietf.org/doc/html/rfc7230#section-3.2(opens new window)

#Request body
The request body contains a JSON object with the user ID of a bot that should receive webhook events and an array of webhook event objects.

destination
String
User ID of a bot that should receive webhook events. The user ID value is a string that matches the regular expression, U[0-9a-f]{32}.

events
Array
Array of webhook event objects. The LINE Platform may send an empty array that doesn't include a webhook event object to confirm communication.

#Response
The bot server must return status code 200 after it receives the HTTP POST request sent from the LINE Platform.

 Note
Even if the bot server fails to receive the HTTP POST request sent from the LINE Platform, the bot server can receive this request again. For more information, see Redeliver a webhook that failed to be received.

The LINE Platform may send an HTTP POST request that doesn't include a webhook event to confirm communication. In this case, send a 200 status code.

Example HTTP POST request without a webhook event:

{
  "destination": "xxxxxxxxxx",
  "events": []
}
#Signature validation
The signature in the x-line-signature request header must be verified to confirm that the request was sent from the LINE Platform.

Authentication is performed as follows:

Compute the digest for the request body. Use the HMAC-SHA256 algorithm with the channel secret as the secret key.
Check if the Base64-encoded digest matches the signature in the x-line-signature request header.
Example of signature validation

 Java
String channelSecret = '...'; // Channel secret string
String httpRequestBody = '...'; // Request body string
SecretKeySpec key = new SecretKeySpec(channelSecret.getBytes(), "HmacSHA256");
Mac mac = Mac.getInstance("HmacSHA256");
mac.init(key);
byte[] source = httpRequestBody.getBytes("UTF-8");
String signature = Base64.encodeBase64String(mac.doFinal(source));
// Compare x-line-signature request header string and the signature
Was this section helpful?

Yes
No
#Webhook Event Objects
These are JSON objects containing events generated by the LINE Platform.

Some properties of these event objects may lack a value. Generated event objects don't contain properties without any value.

 A single webhook may contain multiple webhook event objects
A webhook sent from the LINE Platform may contain multiple webhook event objects. There is not necessarily one user per webhook. A message event from person A and a follow event from person B may be in the same webhook.

Even when you receive a webhook containing multiple event objects, implement it so that the bot server can process it appropriately according to its contents. For more information, see request body under Webhook.

Example webhook event object

JSON
{
  "destination": "xxxxxxxxxx",
  "events": [
    {
      "type": "message",
      "message": {
        "type": "text",
        "id": "14353798921116",
        "text": "Hello, world"
      },
      "timestamp": 1625665242211,
      "source": {
        "type": "user",
        "userId": "U80696558e1aa831..."
      },
      "replyToken": "757913772c4646b784d4b7ce46d12671",
      "mode": "active",
      "webhookEventId": "01FZ74A0TDDPYRVKNK77XKC3ZR",
      "deliveryContext": {
        "isRedelivery": false
      }
    },
    {
      "type": "follow",
      "timestamp": 1625665242214,
      "source": {
        "type": "user",
        "userId": "Ufc729a925b3abef..."
      },
      "replyToken": "bb173f4d9cf64aed9d408ab4e36339ad",
      "mode": "active",
      "webhookEventId": "01FZ74ASS536FW97EX38NKCZQK",
      "deliveryContext": {
        "isRedelivery": false
      }
    },
    {
      "type": "unfollow",
      "timestamp": 1625665242215,
      "source": {
        "type": "user",
        "userId": "Ubbd4f124aee5113..."
      },
      "mode": "active",
      "webhookEventId": "01FZ74B5Y0F4TNKA5SCAVKPEDM",
      "deliveryContext": {
        "isRedelivery": false
      }
    }
  ]
}
#Common properties
The following properties are common properties in webhook event objects.

type
String
Identifier for the type of event

mode
String
Channel state.

active: The channel is active. You can send a reply message or push message, etc. from the bot server that received this webhook event.
standby: The channel is waiting. When the channel state is standby, the webhook event won't contain a reply token to send reply message. For more information about the timing of the channel state set to standby, see Get webhook event in the module documentation.
 When the channel state is standby, the bot server shouldn't send any messages
When the channel state is standby, the module may be replying or otherwise reacting to the content of the received webhook event. Sending messages from the bot while the user and the module are interacting will confuse the user. Therefore, the bot server that received a Webhook event with a mode property of standby shouldn't send any messages.

timestamp
Number
UNIX time of the event occurred (in milliseconds). Even in the case of a redelivered webhook, it represents the time the event occurred, not the time it was redelivered.

 Check timestamp if webhook redelivery is enabled
If webhook redelivery is enabled, the order in which webhook events occur and the order in which they reach the bot server can be different significantly. If this is an issue, check the context by looking at the timestamp.

source
Object
Not always included
Source user, group chat, or multi-person chat object with information about the source of the event.

This property won't be included in the account link event if linking the account has failed.

webhookEventId
String
Webhook Event ID. An ID that uniquely identifies a webhook event. This is a string in ULID format.

deliveryContext.isRedelivery
Boolean
Whether the webhook event is a redelivered one or not. For more information, see Redelivered webhooks.

true: Redelivered webhook event.
false: First webhook event sent.
#Source user
type
String
user

userId
String
ID of the source user

Source user example

JSON
  "source": {
    "type": "user",
    "userId": "U4af4980629..."
  }
#Source group chat
type
String
group

groupId
String
Group ID of the source group chat

userId
String
Not always included
ID of the source user. Only included in message events. Only users of LINE for iOS and LINE for Android are included in userId. For more information, see Consent on getting user profile information.

Source group chat example

JSON
  "source": {
    "type": "group",
    "groupId": "Ca56f94637c...",
    "userId": "U4af4980629..."
  }
#Source multi-person chat
type
String
room

roomId
String
Room ID of the source multi-person chat

userId
String
Not always included
ID of the source user. Only included in message events. Only users of LINE for iOS and LINE for Android are included in userId. For more information, see Consent on getting user profile information.

Source multi-person chat example

JSON
  "source": {
    "type": "room",
    "roomId": "Ra8dbf4673c...",
    "userId": "U4af4980629..."
  }
#Message event
Webhook event object which contains the sent message from a user. The message property contains a message object which corresponds with the message type. You can reply to message events.

timestamp, source, etc.
See Common Properties.

type
String
message

replyToken
String
Reply token used to send reply message to this event

message
Object
Object containing the contents of the message. Message types include:

Text
Image
Video
Audio
File
Location
Sticker
#Text
Message object which contains the text sent from the source.

id
String
Message ID

type
String
text

quoteToken
String
Quote token of the message. For more information, see Get quote tokens in the Messaging API documentation.

text
String
Message text.

If the end user sends a LINE emoji, the LINE emoji will be included as a string, like (hello) or (love). You can find the LINE emoji details in the emojis property.
If the end user mentions someone, the display name of the recipient's LINE account will be included as a string, like @example. You can find the mention details in the mention property.
emojis
Array
Not always included
Array of one or more LINE emoji objects. Only included in the message event when the text property contains a LINE emoji.

 Sent LINE emoji may not be included in the emojis property
The default LINE emojis sent from LINE for Android won't be included.
Unicode-defined emojis and older versions of LINE emojis may not be retrieved correctly.
emojis[].index
Number
Index position for a character in text, with the first character being at position 0.

emojis[].length
Number
The length of the LINE emoji string. For LINE emoji (hello), 7 is the length.

emojis[].productId
String
Product ID for a LINE emoji set. See LINE emoji for an example of a product ID.

emojis[].emojiId
String
ID for a LINE emoji inside a set. See LINE emoji for an example of an emoji ID.

mention
Object
Not always included
Object containing the contents of the mentioned user. Only included in the message event when the text property contains a mention.

mention.mentionees[]
Array of objects
Array of one or more mention objects.

Max: 20 mentions

mention.mentionees[].index
Number
Index position of the user mention for a character in text, with the first character being at position 0.

mention.mentionees[].length
Number
The length of the text of the mentioned user. For a mention @example, 8 is the length.

mention.mentionees[].type
String
Mentioned target.

user: User or bot.
all: Entire group.
mention.mentionees[].userId
String
Not always included
User ID of the mentioned user or bot. Only included if mention.mentions[].type is user. If the mentionee is a user, only included if the user consents to the LINE Official Account obtaining their user profile information.

mention.mentionees[].isSelf
Boolean
Not always included
Whether the mention is to the bot (destination) that received the webhook event. This is only included when the value of the mention.mentionees[].type property is user.

true: This is a mention to the bot that received the webhook event.
false: This is a mention to another user.
For more information, see Webhook when a message including a mention to a bot is sent in the Messaging API documentation.

quotedMessageId
String
Not always included
Message ID of a quoted message. Only included when the received message quotes a past message.

Text message example

JSON
// When a user sends a text message containing mention and an emoji in a group chat
{
  "destination": "xxxxxxxxxx",
  "events": [
    {
      "replyToken": "nHuyWiB7yP5Zw52FIkcQobQuGDXCTA",
      "type": "message",
      "mode": "active",
      "timestamp": 1462629479859,
      "source": {
        "type": "group",
        "groupId": "Ca56f94637c...",
        "userId": "U4af4980629..."
      },
      "webhookEventId": "01FZ74A0TDDPYRVKNK77XKC3ZR",
      "deliveryContext": {
        "isRedelivery": false
      },
      "message": {
        "id": "444573844083572737",
        "type": "text",
        "quoteToken": "q3Plxr4AgKd...",
        "text": "@All @example Good Morning!! (love)",
        "emojis": [
          {
            "index": 29,
            "length": 6,
            "productId": "5ac1bfd5040ab15980c9b435",
            "emojiId": "001"
          }
        ],
        "mention": {
          "mentionees": [
            {
              "index": 0,
              "length": 4,
              "type": "all"
            },
            {
              "index": 5,
              "length": 8,
              "userId": "U49585cd0d5...",
              "type": "user",
              "isSelf": false
            }
          ]
        }
      }
    }
  ]
}
#Image
Message object which contains the image content sent from the source.

id
String
Message ID

type
String
image

quoteToken
String
Quote token of the message. For more information, see Get quote tokens in the Messaging API documentation.

contentProvider.type
String
Provider of the image file.

line: The image was sent by a LINE user. The binary data of the image file can be retrieved by specifying the message ID and calling the Get content endpoint.
external: The URL of the image file is included in the contentProvider.originalContentUrl property. If the provider of the image file is external, the binary data of the image file can't be retrieved by using the Get content endpoint.
contentProvider.originalContentUrl
String
Not always included
URL of the image file. Only included when contentProvider.type is external. The server where the image file is located isn't provided by LY Corporation.

contentProvider.previewImageUrl
String
Not always included
URL of the preview image. Only included when contentProvider.type is external. The server where the preview image file is located isn't provided by LY Corporation.

imageSet.id
String
Not always included
Image set ID. Only included when multiple images are sent simultaneously.

imageSet.index
Number
Not always included
An index starting from 1, indicating the image number in a set of images sent simultaneously. Only included when multiple images are sent simultaneously. However, it won't be included if the sender is using LINE 11.15 or earlier for Android.

 The order in which webhooks are delivered is undefined
If a user simultaneously sends multiple images, multiple webhook events are sent to the bot server from the LINE Platform. The webhooks are delivered in an undefined order, not in the order of the values in imageSet.index.

imageSet.total
Number
Not always included
The total number of images sent simultaneously. If two images are sent simultaneously, the number is 2. Only included when multiple images are sent simultaneously. However, it won't be included if the sender is using LINE 11.15 or earlier for Android.

Image message example

JSON
// When two images are sent simultaneously (First image)
{
    "destination": "xxxxxxxxxx",
    "events": [
        {
            "type": "message",
            "message": {
                "type": "image",
                "id": "354718705033693859",
                "quoteToken": "q3Plxr4AgKd...",
                "contentProvider": {
                    "type": "line"
                },
                "imageSet": {
                    "id": "E005D41A7288F41B65593ED38FF6E9834B046AB36A37921A56BC236F13A91855",
                    "index": 1,
                    "total": 2
                }
            },
            "timestamp": 1627356924513,
            "source": {
                "type": "user",
                "userId": "U4af4980629..."
            },
            "webhookEventId": "01FZ74A0TDDPYRVKNK77XKC3ZR",
            "deliveryContext": {
                "isRedelivery": false
            },
            "replyToken": "7840b71058e24a5d91f9b5726c7512c9",
            "mode": "active"
        }
    ]
}

// When two images are sent simultaneously (Second image)
{
    "destination": "xxxxxxxxxx",
    "events": [
        {
            "type": "message",
            "message": {
                "type": "image",
                "id": "354718705033693861",
                "quoteToken": "yHAz4Ua2wx7...",
                "contentProvider": {
                    "type": "line"
                },
                "imageSet": {
                    "id": "E005D41A7288F41B65593ED38FF6E9834B046AB36A37921A56BC236F13A91855",
                    "index": 2,
                    "total": 2
                }
            },
            "timestamp": 1627356924722,
            "source": {
                "type": "user",
                "userId": "U4af4980629..."
            },
            "webhookEventId": "01FZ74A0TDDPYRVKNK77XKC3ZR",
            "deliveryContext": {
                "isRedelivery": false
            },
            "replyToken": "fbf94e269485410da6b7e3a5e33283e8",
            "mode": "active"
        }
    ]
}
#Video
Message object which contains the video content sent from the source. The preview image is displayed in the chat and the video is played when the image is tapped.

id
String
Message ID

type
String
video

quoteToken
String
Quote token of the message. For more information, see Get quote tokens in the Messaging API documentation.

duration
Number
Not always included
Length of video file (milliseconds)

contentProvider.type
String
Provider of the video file.

line: The video was sent by a LINE user. The binary data of the video file can be retrieved by specifying the message ID and calling the Get content endpoint.
external: The URL of the video file is included in the contentProvider.originalContentUrl property. If the provider of the video file is external, the binary data of the video file can't be retrieved by using the Get content endpoint.
contentProvider.originalContentUrl
String
Not always included
URL of the video file. Only included when contentProvider.type is external. The server where the video file is located isn't provided by LY Corporation.

contentProvider.previewImageUrl
String
Not always included
URL of the preview image. Only included when contentProvider.type is external. The server where the preview image file is located isn't provided by LY Corporation.

Video message example

JSON
{
  "destination": "xxxxxxxxxx",
  "events": [
    {
      "replyToken": "nHuyWiB7yP5Zw52FIkcQobQuGDXCTA",
      "type": "message",
      "mode": "active",
      "timestamp": 1462629479859,
      "source": {
        "type": "user",
        "userId": "U4af4980629..."
      },
      "webhookEventId": "01FZ74A0TDDPYRVKNK77XKC3ZR",
      "deliveryContext": {
        "isRedelivery": false
      },
      "message": {
        "id": "325708",
        "type": "video",
        "quoteToken": "q3Plxr4AgKd...",
        "duration": 60000,
        "contentProvider": {
          "type": "external",
          "originalContentUrl": "https://example.com/original.mp4",
          "previewImageUrl": "https://example.com/preview.jpg"
        }
      }
    }
  ]
}
#Audio
Message object which contains the audio content sent from the source.

id
String
Message ID

type
String
audio

duration
Number
Not always included
Length of audio file (milliseconds)

contentProvider.type
String
Provider of the audio file:

line: The audio was sent by a LINE user. The binary data of the audio file can be retrieved by specifying the message ID and calling the Get content endpoint.
external: The URL of the audio file is included in the contentProvider.originalContentUrl property. If the provider of the audio file is external, the binary data of the audio file can't be retrieved by using the Get content endpoint.
contentProvider.originalContentUrl
String
Not always included
URL of the audio file. Only included when contentProvider.type is external. The server where the audio file is located isn't provided by LY Corporation.

Audio message example

JSON
{
  "destination": "xxxxxxxxxx",
  "events": [
    {
      "replyToken": "nHuyWiB7yP5Zw52FIkcQobQuGDXCTA",
      "type": "message",
      "mode": "active",
      "timestamp": 1462629479859,
      "source": {
        "type": "user",
        "userId": "U4af4980629..."
      },
      "webhookEventId": "01FZ74A0TDDPYRVKNK77XKC3ZR",
      "deliveryContext": {
        "isRedelivery": false
      },
      "message": {
        "id": "325708",
        "type": "audio",
        "duration": 60000,
        "contentProvider": {
          "type": "line"
        }
      }
    }
  ]
}
#File
Message object which contains the file sent from the source. The binary data of the file can be retrieved by specifying the message ID and calling the API. For more information, see Get content.

id
String
Message ID

type
String
file

fileName
String
File name

fileSize
Number
File size in bytes

File message example

JSON
{
  "destination": "xxxxxxxxxx",
  "events": [
    {
      "replyToken": "nHuyWiB7yP5Zw52FIkcQobQuGDXCTA",
      "type": "message",
      "mode": "active",
      "timestamp": 1462629479859,
      "source": {
        "type": "user",
        "userId": "U4af4980629..."
      },
      "webhookEventId": "01FZ74A0TDDPYRVKNK77XKC3ZR",
      "deliveryContext": {
        "isRedelivery": false
      },
      "message": {
        "id": "325708",
        "type": "file",
        "fileName": "file.txt",
        "fileSize": 2138
      }
    }
  ]
}
#Location
Message object which contains the location data sent from the source.

id
String
Message ID

type
String
location

title
String
Not always included
Title

address
String
Not always included
Address

latitude
Decimal
Latitude

longitude
Decimal
Longitude

Location message example

JSON
{
  "destination": "xxxxxxxxxx",
  "events": [
    {
      "replyToken": "nHuyWiB7yP5Zw52FIkcQobQuGDXCTA",
      "type": "message",
      "mode": "active",
      "timestamp": 1462629479859,
      "source": {
        "type": "user",
        "userId": "U4af4980629..."
      },
      "webhookEventId": "01FZ74A0TDDPYRVKNK77XKC3ZR",
      "deliveryContext": {
        "isRedelivery": false
      },
      "message": {
        "id": "325708",
        "type": "location",
        "title": "my location",
        "address": "1-3 Kioicho, Chiyoda-ku, Tokyo, 102-8282 Japan",
        "latitude": 35.67966,
        "longitude": 139.73669
      }
    }
  ]
}
#Sticker
Message object which contains the sticker data sent from the source. For a list of basic LINE stickers and sticker IDs, see Stickers.

 You can't retrieve the sticker image
The package ID and sticker ID of the sticker sent by the user can be retrieved by webhook, but the sticker image itself can't be retrieved.

 The Sticker Arranging feature isn't supported
The Messaging API doesn't currently support the Sticker Arranging feature, so you can't get information about what kind of stickers are being combined. When a user sends a sticker message using the Sticker Arranging feature, the following sticker information is always received by the webhook.

Package ID: 30563
Sticker ID: 651698630
Sticker resource type: STATIC
id
String
Message ID

type
String
sticker

quoteToken
String
Quote token of the message. For more information, see Get quote tokens in the Messaging API documentation.

packageId
String
Package ID

stickerId
String
Sticker ID

stickerResourceType
String
Sticker resource type. One of:

STATIC: Still image
ANIMATION: Animated sticker
SOUND: Sticker with sound
ANIMATION_SOUND: Animated sticker with sound
POPUP: Pop-up sticker or Effect sticker
POPUP_SOUND: Pop-up sticker with sound or Effect sticker with sound
CUSTOM: Custom sticker. Text entered by user can't be retrieved.
MESSAGE: Message sticker
NAME_TEXT: Custom sticker (discontinued)
PER_STICKER_TEXT: Message sticker (discontinued)
 About stickerResourceType
In the future, we may add new resource types without notice. Make sure your implementation can handle both current and future sticker resource types.

keywords
Array of strings
Not always included
Array of up to 15 keywords describing the sticker. If a sticker has 16 or more keywords, a random selection of 15 keywords will be returned. The keyword selection is random for each event, so different keywords may be returned for the same sticker.

 About keywords
The keywords property is currently in an experimental phase and discontinuation or spec changes may occur in the future.

text
String
Not always included
Any text entered by the user. This property is only included for message stickers.
Max character limit: 100

 You can't retrieve the text of custom stickers
In the case of custom stickers, the text entered by the user can't be retrieved.

quotedMessageId
String
Not always included
Message ID of a quoted message. Only included when the received message quotes a past message.

Sticker message example

JSON
// Example of animated sticker
{
    "destination": "xxxxxxxxxx",
    "events": [
        {
            "replyToken": "nHuyWiB7yP5Zw52FIkcQobQuGDXCTA",
            "type": "message",
            "mode": "active",
            "timestamp": 1462629479859,
            "source": {
                "type": "user",
                "userId": "U4af4980629..."
            },
            "webhookEventId": "01FZ74A0TDDPYRVKNK77XKC3ZR",
            "deliveryContext": {
                "isRedelivery": false
            },
            "message": {
                "type": "sticker",
                "id": "1501597916",
                "quoteToken": "q3Plxr4AgKd...",
                "stickerId": "52002738",
                "packageId": "11537",
                "stickerResourceType": "ANIMATION",
                "keywords": [
                    "cony",
                    "sally",
                    "Staring",
                    "hi",
                    "whatsup",
                    "line",
                    "howdy",
                    "HEY",
                    "Peeking",
                    "wave",
                    "peek",
                    "Hello",
                    "yo",
                    "greetings"
                ]
            }
        }
    ]
}

// Example of message sticker
{
    "destination": "xxxxxxxxxx",
    "events": [
        {
            "type": "message",
            "message": {
                "type": "sticker",
                "id": "123456789012345678",
                "quoteToken": "q3Plxr4AgKd...",
                "stickerId": "738839",
                "packageId": "12287",
                "stickerResourceType": "MESSAGE",
                "keywords": [
                    "Anticipation",
                    "Sparkle",
                    "Straight face",
                    "Staring",
                    "Thinking"
                ],
                "text": "Let's\nhang out\nthis weekend!"
            },
            "timestamp": 1635756190879,
            "source": {
                "type": "group",
                "groupId": "C99ae82bcd...",
                "userId": "Ub82c8fd9b..."
            },
            "webhookEventId": "01FZ74A0TDDPYRVKNK77XKC3ZR",
            "deliveryContext": {
                "isRedelivery": false
            },
            "replyToken": "ce8c57ec18374a4b94f40abab97145f8",
            "mode": "active"
        }
    ]
}
#Unsend event
Event object for when the user unsends a message.

When a user unsends a sent message, an unsend event is sent to the bot server. When the unsend event is received, we recommend that service providers respect the user's intent to unsend a sent message and handle the message appropriately with the utmost care so that the target message can't be seen or used in the future. For more information, see Processing on receipt of unsend event in the Messaging API documentation.

timestamp, source, etc.
See Common Properties.

type
String
unsend

unsend.messageId
String
The message ID of the unsent message

Unsend event example

JSON
{
  "destination": "xxxxxxxxxx",
  "events": [
    {
      "type": "unsend",
      "mode": "active",
      "timestamp": 1462629479859,
      "source": {
        "type": "group",
        "groupId": "Ca56f94637c...",
        "userId": "U4af4980629..."
      },
      "webhookEventId": "01FZ74A0TDDPYRVKNK77XKC3ZR",
      "deliveryContext": {
        "isRedelivery": false
      },
      "unsend": {
        "messageId": "325708"
      }
    }
  ]
}
#Follow event
Event object for when your LINE Official Account is added as a friend (or unblocked). You can reply to follow events.

timestamp, source, etc.
See Common Properties.

type
String
follow

replyToken
String
Reply token used to send reply message to this event

follow.isUnblocked
Boolean
true: The user has unblocked the LINE Official Account.
false: The user has added the LINE Official Account as a friend.
 Accuracy of follow.isUnblocked
The follow.isUnblocked property doesn't guarantee the complete accuracy of "add friend" and "unblock".

Follow event example

JSON
// When the user has added the LINE Official Account as a friend
{
  "destination": "xxxxxxxxxx",
  "events": [
    {
      "replyToken": "85cbe770fa8b4f45bbe077b1d4be4a36",
      "type": "follow",
      "mode": "active",
      "timestamp": 1705891467176,
      "source": {
        "type": "user",
        "userId": "U3d3edab4f36c6292e6d8a8131f141b8b"
      },
      "webhookEventId": "01HMQGW40RZJPJM3RAJP7BHC2Q",
      "deliveryContext": {
        "isRedelivery": false
      },
      "follow": {
        "isUnblocked": false
      }
    }
  ]
}

// When the user has unblocked the LINE Official Account
{
  "destination": "xxxxxxxxxx",
  "events": [
    {
      "replyToken": "nHuyWiB7yP5Zw52FIkcQobQuGDXCTA",
      "type": "follow",
      "mode": "active",
      "timestamp": 1462629479859,
      "source": {
        "type": "user",
        "userId": "U4af4980629..."
      },
      "webhookEventId": "01FZ74A0TDDPYRVKNK77XKC3ZR",
      "deliveryContext": {
        "isRedelivery": false
      },
      "follow": {
        "isUnblocked": true
      }
    }
  ]
}
#Unfollow event
Event object for when your LINE Official Account is blocked.

timestamp, source, etc.
See Common Properties.

type
String
unfollow

Unfollow event example

JSON
{
  "destination": "xxxxxxxxxx",
  "events": [
    {
      "type": "unfollow",
      "mode": "active",
      "timestamp": 1462629479859,
      "source": {
        "type": "user",
        "userId": "U4af4980629..."
      },
      "webhookEventId": "01FZ74A0TDDPYRVKNK77XKC3ZR",
      "deliveryContext": {
        "isRedelivery": false
      }
    }
  ]
}
#Join event
Event object for when your LINE Official Account joins a group chat or multi-person chat. You can reply to join events.

A join event is triggered at different times for group chats and multi-person chats.

For group chats: A join event is sent when a user invites your LINE Official Account.
For multi-person chats: A join event is sent when the first event (for example when a user sends a message or is added to the multi-person chat) occurs after your LINE Official Account is added.
timestamp, source, etc.
See Common Properties.

type
String
join

replyToken
String
Reply token used to send reply message to this event

Join event example

JSON
{
  "destination": "xxxxxxxxxx",
  "events": [
    {
      "replyToken": "nHuyWiB7yP5Zw52FIkcQobQuGDXCTA",
      "type": "join",
      "mode": "active",
      "timestamp": 1462629479859,
      "source": {
        "type": "group",
        "groupId": "C4af4980629..."
      },
      "webhookEventId": "01FZ74A0TDDPYRVKNK77XKC3ZR",
      "deliveryContext": {
        "isRedelivery": false
      }
    }
  ]
}
#Leave event
Event object for when a user removes your LINE Official Account from a group chat or when your LINE Official Account leaves a group chat or multi-person chat.

timestamp, source, etc.
See Common Properties.

type
String
leave

Leave event example

JSON
{
  "destination": "xxxxxxxxxx",
  "events": [
    {
      "type": "leave",
      "mode": "active",
      "timestamp": 1462629479859,
      "source": {
        "type": "group",
        "groupId": "C4af4980629..."
      },
      "webhookEventId": "01FZ74A0TDDPYRVKNK77XKC3ZR",
      "deliveryContext": {
        "isRedelivery": false
      }
    }
  ]
}
#Member join event
Event object for when a user joins a group chat or multi-person chat that the LINE Official Account is in.

timestamp, source, etc.
See Common Properties.

type
String
memberJoined

joined.members
Array
Users who joined. Array of source user objects.

replyToken
String
Reply token used to send reply message to this event

Member join event example

JSON
{
  "destination": "xxxxxxxxxx",
  "events": [
    {
      "replyToken": "0f3779fba3b349968c5d07db31eabf65",
      "type": "memberJoined",
      "mode": "active",
      "timestamp": 1462629479859,
      "source": {
        "type": "group",
        "groupId": "C4af4980629..."
      },
      "webhookEventId": "01FZ74A0TDDPYRVKNK77XKC3ZR",
      "deliveryContext": {
        "isRedelivery": false
      },
      "joined": {
        "members": [
          {
            "type": "user",
            "userId": "U4af4980629..."
          },
          {
            "type": "user",
            "userId": "U91eeaf62d9..."
          }
        ]
      }
    }
  ]
}
#Member leave event
Event object for when a user leaves a group chat or multi-person chat that the LINE Official Account is in.

timestamp, source, etc.
See Common Properties.

type
String
memberLeft

left.members
Array
Users who left. Array of source user objects.

Member leave event example

JSON
{
  "destination": "xxxxxxxxxx",
  "events": [
    {
      "type": "memberLeft",
      "mode": "active",
      "timestamp": 1462629479960,
      "source": {
        "type": "group",
        "groupId": "C4af4980629..."
      },
      "webhookEventId": "01FZ74A0TDDPYRVKNK77XKC3ZR",
      "deliveryContext": {
        "isRedelivery": false
      },
      "left": {
        "members": [
          {
            "type": "user",
            "userId": "U4af4980629..."
          },
          {
            "type": "user",
            "userId": "U91eeaf62d9..."
          }
        ]
      }
    }
  ]
}
#Postback event
Event object for when a user performs a postback action which initiates a postback. You can reply to postback events.

timestamp, source, etc.
See Common Properties.

type
String
postback

replyToken
String
Reply token used to send reply message to this event

postback.data
String
Postback data

postback.params
Object
Any of these JSON objects:

postback.params object for date-time selection action.
JSON object with date and time selected by the user via Datetime picker action.
Returned only for postback actions by Datetime picker action.
postback.paramsobject for rich menu switch action.
JSON object with rich menu alias ID selected by the user via Rich menu switch action.
Returned only for postback actions by Rich menu switch action.
Postback event example

JSON
// Postback event for date-time selection action
{
    "destination": "xxxxxxxxxx",
    "events": [
        {
            "replyToken": "b60d432864f44d079f6d8efe86cf404b",
            "type": "postback",
            "mode": "active",
            "source": {
                "userId": "U91eeaf62d...",
                "type": "user"
            },
            "timestamp": 1513669370317,
            "webhookEventId": "01FZ74A0TDDPYRVKNK77XKC3ZR",
            "deliveryContext": {
                "isRedelivery": false
            },
            "postback": {
                "data": "storeId=12345",
                "params": {
                    "datetime": "2017-12-25T01:00"
                }
            }
        }
    ]
}

// Postback event for rich menu switch action
{
    "destination": "xxxxxxxxxx",
    "events": [
        {
            "replyToken": "b60d432864f44d079f6d8efe86cf404b",
            "type": "postback",
            "mode": "active",
            "source": {
                "userId": "U91eeaf62d...",
                "type": "user"
            },
            "timestamp": 1619754620404,
            "webhookEventId": "01FZ74A0TDDPYRVKNK77XKC3ZR",
            "deliveryContext": {
                "isRedelivery": false
            },
            "postback": {
                "data": "richmenu-changed-to-b",
                "params": {
                    "newRichMenuAliasId": "richmenu-alias-b",
                    "status": "SUCCESS"
                }
            }
        }
    ]
}
#postback.params object for date-time selection action
Object with the date and time selected by a user through a datetime picker action. The full-date, time-hour, and time-minute formats follow the RFC3339 protocol (opens new window).

Property	Format	Description
date	full-date	Date selected by user. Only included in the date mode.
time	time-hour ":" time-minute	Time selected by the user. Only included in the time mode.
datetime	full-date "T" time-hour ":" time-minute	Date and time selected by the user. Only included in the datetime mode.
postback.params object for date-time selection action example

JSON
{
  "datetime": "2017-12-25T01:00"
}
#postback.paramsobject for rich menu switch action
Object with rich menu alias ID selected by user via rich menu switch action.

Property	Format	Description
newRichMenuAliasId Not always included	String	Rich menu alias ID to switch to. This property won't be included if switching the rich menu has failed.
status	String	SUCCESS: Rich menu changed successfully.
RICHMENU_ALIAS_ID_NOTFOUND: The specified rich menu alias ID wasn't found.
RICHMENU_NOTFOUND: The rich menu ID associated with the specified rich menu alias ID wasn't found.
FAILED: Rich menu switch failed.
postback.params object for rich menu switch action example

JSON
{
  "newRichMenuAliasId": "richmenu-alias-b",
  "status": "SUCCESS"
}
#Video viewing complete event
Event for when a user finishes viewing a video at least once with the specified trackingId sent by the LINE Official Account.

 The number of video views
A video viewing complete event doesn't necessarily indicate the number of times a user has watched a video.

Watching a video multiple times in a single session in a chat room doesn't result in a duplicate event. However, if you close the chat room and reopen it to watch the video again, the event may reoccur.

 Video in imagemap messages and flex messages is not supported by the video viewing complete event
The trackingId can't be specified for a video in imagemap messages and flex messages.

timestamp, source, etc.
See Common Properties.

type
String
videoPlayComplete

replyToken
String
Reply token used to send reply message to this event

videoPlayComplete.trackingId
String
ID used to identify a video. Returns the same value as the trackingId assigned to the video message.

Video viewing complete event example

JSON
{
  "destination": "xxxxxxxxxx",
  "events": [
    {
      "replyToken": "nHuyWiB7yP5Zw52FIkcQobQuGDXCTA",
      "type": "videoPlayComplete",
      "mode": "active",
      "timestamp": 1462629479859,
      "source": {
        "type": "user",
        "userId": "U4af4980629..."
      },
      "webhookEventId": "01FZ74A0TDDPYRVKNK77XKC3ZR",
      "deliveryContext": {
        "isRedelivery": false
      },
      "videoPlayComplete": {
        "trackingId": "track-id"
      }
    }
  ]
}
#Beacon event
Event object for when a user enters the range of a LINE Beacon. You can reply to beacon events.

timestamp, source, etc.
See Common Properties.

type
String
beacon

replyToken
String
Reply token used to send reply message to this event

beacon.hwid
String
Hardware ID of the beacon that was detected

beacon.type
String
Type of beacon event. See Beacon event types.

beacon.dm
String
Not always included
Device message of beacon that was detected. This message consists of data generated by the beacon to send notifications to bot servers. Only included in webhook events from devices that support the "device message" property.
For more information, see the LINE Simple Beacon specification (opens new window).

Beacon event example

JSON
{
  "destination": "xxxxxxxxxx",
  "events": [
    {
      "replyToken": "nHuyWiB7yP5Zw52FIkcQobQuGDXCTA",
      "type": "beacon",
      "mode": "active",
      "timestamp": 1462629479859,
      "source": {
        "type": "user",
        "userId": "U4af4980629..."
      },
      "webhookEventId": "01FZ74A0TDDPYRVKNK77XKC3ZR",
      "deliveryContext": {
        "isRedelivery": false
      },
      "beacon": {
        "hwid": "d41d8cd98f",
        "type": "enter"
      }
    }
  ]
}
#Beacon event types
beacon.type	Description
enter	Entered beacon's reception range.
banner	Tapped beacon banner.
stay	A user is within the range of the beacon's reception.
This event is sent repeatedly at a minimum interval of 10 seconds.
 Registration has been suspended in Japan
As of January 2021, we are no longer accepting new applications for banner and stay events in Japan, while other regions except Japan still accept new application.

#Account link event
Event object for when a user has linked their LINE account with a provider's service account. You can reply to account link events.

If the link token has expired or has already been used, no webhook event will be sent and the user will be shown an error.

timestamp, source, etc.
See Common Properties.

The source property won't be included in the account link event if linking the account has failed.

type
String
accountLink

replyToken
String
Not always included
Reply token used to send reply message to this event. This property won't be included if linking the account has failed.

link.result
String
One of the following values to indicate whether linking the account was successful or not:

ok: Indicates linking the account was successful.
failed: Indicates linking the account failed for any reason, such as due to a user impersonation.
link.nonce
String
Specified nonce (number used once) when verifying the user ID. For more information, see Generate a nonce and redirect the user to the LINE Platform in the Messaging API documentation.

Account link event example

JSON
{
  "destination": "xxxxxxxxxx",
  "events": [
    {
      "replyToken": "b60d432864f44d079f6d8efe86cf404b",
      "type": "accountLink",
      "mode": "active",
      "source": {
        "userId": "U91eeaf62d...",
        "type": "user"
      },
      "timestamp": 1513669370317,
      "webhookEventId": "01FZ74A0TDDPYRVKNK77XKC3ZR",
      "deliveryContext": {
        "isRedelivery": false
      },
      "link": {
        "result": "ok",
        "nonce": "xxxxxxxxxxxxxxx"
      }
    }
  ]
}
#Membership event
This event indicates that a user has joined, renewed, or left a membership of your LINE Official Account.

If your LINE Official Account provides multiple membership plans, and a user who is currently joined one plan changes to another plan during the same month, webhook events will be sent for both the leaving and joining. If a user hasn't consented to allow access to their profile information, no webhook event will be sent. For more information, see Consent on getting user profile information in the Messaging API documentation.

timestamp, source, etc.
See Common properties.

type
String
membership

replyToken
String
Reply token used to send a reply message to this event

membership.type
String
Type of membership event. One of the following values:

joined: User joined the membership.
left: User left the membership.
renewed: User renewed the membership.
membership.membershipId
Number
A membership ID that the user has joined, left, or renewed.

Membership event example

JSON
{
  "destination": "xxxxxxxxxx",
  "events": [
    {
      "type": "membership",
      "source": {
        "type": "user",
        "userId": "U4af4980629..."
      },
      "replyToken": "nHuyWiB7yP5Zw52FIkcQobQuGDXCTA",
      "membership": {
        "type": "joined",
        "membershipId": 3189
      },
      "timestamp": 1462629479859,
      "mode": "active",
      "webhookEventId": "01FZ74A0TDDPYRVKNK77XKC3ZR",
      "deliveryContext": {
        "isRedelivery": false
      }
    }
  ]
}
Was this section helpful?

Yes
No
#Webhook settings
You can configure, test, and get information on channel webhook endpoints.

Endpoints
PUT  /v2/bot/channel/webhook/endpoint
GET  /v2/bot/channel/webhook/endpoint
POST /v2/bot/channel/webhook/test
Show 
#Getting content
You can get the content that a user has sent to your LINE Official Account by using the message IDs received via the webhook.

Endpoints
GET /v2/bot/message/{messageId}/content
GET /v2/bot/message/{messageId}/content/transcoding
GET /v2/bot/message/{messageId}/content/preview
Show 
#Channel access token
You can issue, get, or revoke the channel access token required when calling the Messaging API from the app. For more information, see Channel access token in the LINE Platform basics.

Endpoints
POST /oauth2/v2.1/token
GET  /oauth2/v2.1/verify
GET  /oauth2/v2.1/tokens/kid
POST /oauth2/v2.1/revoke
POST /oauth2/v3/token
POST /v2/oauth/accessToken
POST /v2/oauth/verify
POST /v2/oauth/revoke
Show 
#Message
You can send a message and obtain information about the sent message.

Endpoints
POST /v2/bot/message/reply
POST /v2/bot/message/push
POST /v2/bot/message/multicast
POST /v2/bot/message/narrowcast
GET  /v2/bot/message/progress/narrowcast
POST /v2/bot/message/broadcast
POST /v2/bot/chat/loading/start
GET  /v2/bot/message/quota
GET  /v2/bot/message/quota/consumption
GET  /v2/bot/message/delivery/reply
GET  /v2/bot/message/delivery/push
GET  /v2/bot/message/delivery/multicast
GET  /v2/bot/message/delivery/broadcast
POST /v2/bot/message/validate/reply
POST /v2/bot/message/validate/push
POST /v2/bot/message/validate/multicast
POST /v2/bot/message/validate/narrowcast
POST /v2/bot/message/validate/broadcast
Show 
#Managing Audience
You can create, update, activate, or delete an audience. Specify the audience when sending narrowcast messages.

Endpoints
POST   /v2/bot/audienceGroup/upload
POST   /v2/bot/audienceGroup/upload/byFile
PUT    /v2/bot/audienceGroup/upload
PUT    /v2/bot/audienceGroup/upload/byFile
POST   /v2/bot/audienceGroup/click
POST   /v2/bot/audienceGroup/imp
PUT    /v2/bot/audienceGroup/{audienceGroupId}/updateDescription
PUT    /v2/bot/audienceGroup/{audienceGroupId}/activate
DELETE /v2/bot/audienceGroup/{audienceGroupId}
GET    /v2/bot/audienceGroup/{audienceGroupId}
GET    /v2/bot/audienceGroup/list
GET    /v2/bot/audienceGroup/shared/{audienceGroupId}
GET    /v2/bot/audienceGroup/shared/list
GET    /v2/bot/audienceGroup/authorityLevel
PUT    /v2/bot/audienceGroup/authorityLevel
Show 
#Insights
You can obtain information on the number of messages sent from the LINE Official Account, number of friends, and other statistical data.

Endpoints
GET /v2/bot/insight/message/delivery?date={date}
GET /v2/bot/insight/followers?date={date}
GET /v2/bot/insight/demographic
GET /v2/bot/insight/message/event?requestId={requestId}
GET /v2/bot/insight/message/event/aggregation?customAggregationUnit={customAggregationUnit}&from={from}&to={to}
GET /v2/bot/message/aggregation/info
GET /v2/bot/message/aggregation/list
Show 
#Users
You can get information of users who have added your LINE Official Account as a friend.

 Accessing your own user ID
You can access your user ID under the Basic settings tab of your channel on the LINE Developers Console. For more information on permissions per role in the LINE Developers Console, see Channel roles in Managing roles. There is no API available for retrieving your own user ID.

Endpoints
GET /v2/bot/profile/{userId}
GET /v2/bot/followers/ids
Show 
#Membership
You can get information about the memberships of your LINE Official Accounts. For more information, see Use membership features in the Messaging API documentation.

Endpoints
GET /v2/bot/membership/subscription/{userId}
GET /v2/bot/membership/{membershipId}/users/ids
GET /v2/bot/membership/list
Show 
#Bot
You can obtain basic information on the LINE Official Account's bots.

Endpoints
GET /v2/bot/info
Show 
#Group chats
You can obtain information about the group chats and their members that the LINE Official Account is a member of.

Endpoints
GET  /v2/bot/group/{groupId}/summary
GET  /v2/bot/group/{groupId}/members/count
GET  /v2/bot/group/{groupId}/members/ids
GET  /v2/bot/group/{groupId}/member/{userId}
POST /v2/bot/group/{groupId}/leave
Show 
#Multi-person chats
You can obtain information about the multi-person chats and their members that the LINE Official Account is a member of.

Endpoints
GET  /v2/bot/room/{roomId}/members/count
GET  /v2/bot/room/{roomId}/members/ids
GET  /v2/bot/room/{roomId}/member/{userId}
POST /v2/bot/room/{roomId}/leave
Show 
#Rich menu
Customizable menu that is displayed on your LINE Official Account's chat screen. For more information, see Use rich menus.

Endpoints
POST   /v2/bot/richmenu
POST   /v2/bot/richmenu/validate
POST   /v2/bot/richmenu/{richMenuId}/content
GET    /v2/bot/richmenu/{richMenuId}/content
GET    /v2/bot/richmenu/list
GET    /v2/bot/richmenu/{richMenuId}
DELETE /v2/bot/richmenu/{richMenuId}
POST   /v2/bot/user/all/richmenu/{richMenuId}
GET    /v2/bot/user/all/richmenu
DELETE /v2/bot/user/all/richmenu
Show 
#Per-user rich menu
You can set the rich menu on a per-user basis by specifying the user ID and the rich menu ID. For more information, see Use per-user rich menus in the Messaging API documentation.

Endpoints
POST   /v2/bot/user/{userId}/richmenu/{richMenuId}
POST   /v2/bot/richmenu/bulk/link
GET    /v2/bot/user/{userId}/richmenu
DELETE /v2/bot/user/{userId}/richmenu
POST   /v2/bot/richmenu/bulk/unlink
POST   /v2/bot/richmenu/batch
GET    /v2/bot/richmenu/progress/batch
POST   /v2/bot/richmenu/validate/batch
Show 
#Rich menu alias
You can provide users a rich menu with tab switching using rich menu aliases and rich menu switch action. For more information, see Switch between tabs on rich menus in the Messaging API documentation.

Endpoints
POST   /v2/bot/richmenu/alias
DELETE /v2/bot/richmenu/alias/{richMenuAliasId}
POST   /v2/bot/richmenu/alias/{richMenuAliasId}
GET    /v2/bot/richmenu/alias/{richMenuAliasId}
GET    /v2/bot/richmenu/alias/list
Show 
#Account link
You can link the service account provided by the provider (corporate and developer) with the account of the LINE user.

Endpoints
POST /v2/bot/user/{userId}/linkToken
Show 
#Message objects
JSON object which contains the contents of the message you send.

 Validating message objects
By using the following endpoints, you can validate message objects:

Validate message objects of a reply message
Validate message objects of a push message
Validate message objects of a multicast message
Validate message objects of a narrowcast message
Validate message objects of a broadcast message
Show 
#Action objects
These are types of actions for your bot to take when a user taps a button or an image in a message.

Postback action
Message action
URI action
Datetime picker action
Camera action
Camera roll action
Location action
Richmenu Switch Action
Clipboard action
Show 
#Rich menu structure
Rich menus consist of either of these objects.

Rich menu object without the rich menu ID. Use this object when you create a rich menu.
Rich menu response object with the rich menu ID. This object is returned when you get a rich menu or get a list of rich menus.
Area objects and action objects are included in these objects.